# AQUASKY 自動黃金問題問答工具 PRD

> 文件版本：v1.0  \|  撰寫日期：2025-07-16

## 1. 背景與目標
AQUASKY 擁有一份 20 題的「黃金問題庫」，希望定期（每週一）向多個大型語言模型（LLMs）發問，以監控品牌相關敘述及競品比較結果。透過自動化工具，可：
1. 節省人工測試時間。
2. 系統化蒐集各模型對 AQUASKY 的觀感與回覆差異。
3. 提供決策者（高階主管、技術主管、採購）快速檢視報告。

## 2. 預期使用者
| 角色 | 需求 |
|------|------|
| 行銷/品牌團隊 | 監控市場聲量與品牌一致性 |
| 產品/技術主管 | 了解技術問題的回答正確度 |
| 採購/業務 | 評估競品比較與商業優勢 |

## 3. 主要功能需求（Must Have）
| 編號 | 功能 | 說明 |
|------|------|------|
| F1 | 問題庫讀取 | 從 `AQUASKY AEO 監控專案 - 黃金問題庫 V2.0.md` 讀取 20 題 |
| F2 | 定時排程 | 每週一 09:00 (Asia/Taipei) 自動執行 |
| F3 | 多模型發問 | 支援 GPT-4o、Claude-3、Gemini Pro（可擴充） |
| F4 | 回覆收集 | 取得文字回應，存入結構化檔案 |
| F5 | 報告輸出 | 產出 Markdown & Excel，方便閱讀與分析 |
| F6 | 日誌與錯誤處理 | 失敗重試、錯誤紀錄、簡易通知 |

## 4. 次要/可選功能（Nice to Have）
| 編號 | 功能 | 說明 |
|------|------|------|
| N1 | 情感分析 | 對回覆做情感/正負向分析 |
| N2 | 關鍵詞雲 | 自動生成關鍵詞視覺化圖表 |
| N3 | Email 通知 | 執行完成後寄送結果鏈結 |

## 5. 非功能需求
1. **執行環境**：Python 3.11（跨平台），以虛擬環境運行。
2. **效能**：單次執行在 10 分鐘內完成（視 API 回應速度而定）。
3. **安全性**：API Key 以 `.env` 檔或 GitHub Actions Secret 管理；不寫死在程式碼。
4. **可維護性**：模組化程式結構，每檔 < 600 行，並附註解。  

## 6. 系統架構草圖
```mermaid
graph TD
    Schedule[排程 (cron/GitHub Actions)] -->|觸發| Runner[Python 主程式]
    Runner -->|讀取問題庫| QuestionBank
    Runner -->|串接| LLMs[多語言模型 APIs]
    LLMs -->|回覆| Runner
    Runner -->|寫入| Storage[(Excel / JSON / Markdown)]
    Runner -->|完成通知| Log[日誌/Email]
```

## 7. 執行流程
1. 排程器於週一 09:00 觸發。  
2. 主程式讀取黃金問題庫 (20 題)。  
3. 依序呼叫各 LLM API，平行/序列發送問題。  
4. 收集回覆並標註模型、時間戳記、問題分類。  
5. 將結果寫入 `results/YYYY-MM-DD/` 目錄下：  
   - `answers.xlsx`：每模型一個工作表。  
   - `answers.md`：Markdown 比較表。  
6. 記錄執行日誌，如有錯誤自動重試 3 次；仍失敗則記錄並結束。  
7. （可選）發送 Email 通知。  

## 8. 里程碑與時程（T0 = 2025-07-16）
| Phase | 內容 | 完成日 |
|-------|------|--------|
| M1 | PRD 完成並審核 | T0 + 1 天 |
| M2 | 架構與 API Key 準備 | T0 + 3 天 |
| M3 | 主程式 MVP (F1~F4) | T0 + 7 天 |
| M4 | 報告輸出 (F5) | T0 + 10 天 |
| M5 | 錯誤處理、文件化 | T0 + 14 天 |
| M6 | Nice to Have 功能 | T0 + 21 天 |

## 9. 風險與緩解
| 風險 | 影響 | 緩解方案 |
|------|------|----------|
| API 費用增加 | 成本超支 | 設定每次執行總 token 上限與成本估算 |
| 模型限制或下線 | 功能中斷 | 抽象化 API 介面，便於替換/新增模型 |
| 網路或排程失敗 | 執行中斷 | 加入重試與監控警示 |

## 10. 驗收標準
1. 週一定時執行，產生含所有模型回覆的報告。  
2. 回覆檔案結構正確、資料完整。  
3. 紀錄檔包含成功/失敗資訊。  
4. 程式碼具備清晰註解，且單檔不超過 600 行。

---
若有任何需求變更，請更新本 PRD 並版本控制。
